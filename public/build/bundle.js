var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e,n,o){if(t){const r=l(t,e,n,o);return t[0](r)}}function l(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function u(t,e,n,o,r,s,c){const i=function(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}(e,o,r,s);if(i){const r=l(e,n,o,c);t.p(r,i)}}const a="undefined"!=typeof window;let d=a?()=>window.performance.now():()=>Date.now(),f=a?t=>requestAnimationFrame(t):t;const m=new Set;function $(t){m.forEach((e=>{e.c(t)||(m.delete(e),e.f())})),0!==m.size&&f($)}function p(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function y(){return v(" ")}function w(){return v("")}function x(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function P(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function C(t,e,n){t.classList[n?"add":"remove"](e)}function j(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const E=new Set;let M,L=0;function R(t,e,n,o,r,s,c,i=0){const l=16.666/o;let u="{\n";for(let t=0;t<=1;t+=l){const o=e+(n-e)*s(t);u+=100*t+`%{${c(o,1-o)}}\n`}const a=u+`100% {${c(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${i}`,f=t.ownerDocument;E.add(f);const m=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(b("style")).sheet),$=f.__svelte_rules||(f.__svelte_rules={});$[d]||($[d]=!0,m.insertRule(`@keyframes ${d} ${a}`,m.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${d} ${o}ms linear ${r}ms 1 both`,L+=1,d}function O(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),L-=r,L||f((()=>{L||(E.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),E.clear())})))}function S(t){M=t}function T(){if(!M)throw new Error("Function called outside component initialization");return M}function U(){const t=T();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=j(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}function q(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const N=[],W=[],A=[],D=[],z=Promise.resolve();let F=!1;function B(t){A.push(t)}function J(t){D.push(t)}let I=!1;const G=new Set;function H(){if(!I){I=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];S(e),Y(e.$$)}for(S(null),N.length=0;W.length;)W.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];G.has(e)||(G.add(e),e())}A.length=0}while(N.length);for(;D.length;)D.pop()();F=!1,I=!1,G.clear()}}function Y(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}let K;function Q(t,e,n){t.dispatchEvent(j(`${e?"intro":"outro"}${n}`))}const V=new Set;let X;function Z(){X={r:0,c:[],p:X}}function tt(){X.r||r(X.c),X=X.p}function et(t,e){t&&t.i&&(V.delete(t),t.i(e))}function nt(t,e,n,o){if(t&&t.o){if(V.has(t))return;V.add(t),X.c.push((()=>{V.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const ot={duration:0};function rt(n,o,c,i){let l=o(n,c),u=i?0:1,a=null,p=null,g=null;function h(){g&&O(n,g)}function b(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(o){const{delay:s=0,duration:c=300,easing:i=e,tick:v=t,css:y}=l||ot,w={start:d()+s,b:o};o||(w.group=X,X.r+=1),a||p?p=w:(y&&(h(),g=R(n,u,o,c,s,i,y)),o&&v(0,1),a=b(w,c),B((()=>Q(n,o,"start"))),function(t){let e;0===m.size&&f($),new Promise((n=>{m.add(e={c:t,f:n})}))}((t=>{if(p&&t>p.start&&(a=b(p,c),p=null,Q(n,a.b,"start"),y&&(h(),g=R(n,u,a.b,a.duration,0,i,l.css))),a)if(t>=a.end)v(u=a.b,1-u),Q(n,a.b,"end"),p||(a.b?h():--a.group.r||r(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;u=a.a+a.d*i(e/a.duration),v(u,1-u)}return!(!a&&!p)})))}return{run(t){s(l)?(K||(K=Promise.resolve(),K.then((()=>{K=null}))),K).then((()=>{l=l(),v(t)})):v(t)},end(){h(),a=p=null}}}function st(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function ct(t){t&&t.c()}function it(t,e,o,c){const{fragment:i,on_mount:l,on_destroy:u,after_update:a}=t.$$;i&&i.m(e,o),c||B((()=>{const e=l.map(n).filter(s);u?u.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(B)}function lt(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){-1===t.$$.dirty[0]&&(N.push(t),F||(F=!0,z.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(e,n,s,c,i,l,u=[-1]){const a=M;S(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:n.context||[]),callbacks:o(),dirty:u,skip_bound:!1};let f=!1;if(d.ctx=s?s(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),f&&ut(e,t)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();n.intro&&et(e.$$.fragment),it(e,n.target,n.anchor,n.customElement),H()}S(a)}class dt{$destroy(){lt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var ft=t=>new Promise((e=>{const n=new Image;n.onload=()=>{const t=document.createElement("canvas"),o=t.getContext("2d");t.width=n.width,t.height=n.height,o.drawImage(n,0,0),t.toBlob((t=>{e(new File([t],"image.jpg"))}),"image/jpeg",.98)},n.src=URL.createObjectURL(t)}));const mt=t=>{};function $t(t){return new Promise((e=>setTimeout(e,t)))}function pt(t){return t[0].toUpperCase()+t.substring(1)}async function gt(t,e,n=mt){for(let t=0;t<e.length;++t)"image/jpeg"!==e[t].type&&(n("Converting images..."),e[t]=await ft(e[t]));n("Reserving upload locations...");const[o,r]=await async function(t=!1){const e=await fetch("/reserve-upload-location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numwombo:t?2:1,premium:!1,user_id:null})}),n=await e.json();return[n.id,n.upload_photos]}(t.combo);return n("Uploading images..."),await async function(t,e){for(let n=0;n<t.length;++n){const o=new FormData,r=t[n].fields;for(const t in r)o.append(t,r[t]);o.append("file",e[n],"image.jpg"),await fetch("/upload-image",{method:"POST",body:o})}}(r,e),n("Generating Wombo..."),await async function(t,e,n=mt){await fetch("/start-processing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({request_id:t,request_info:{meme_id:e,premium:!1}})});for(;;){const e=await fetch("/get-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({request_id:t})}),o=await e.json();switch(o.state){case"completed":return o.video_url;case"failed":case"input":throw Error(`Generation failed: ${JSON.stringify(o)}`);default:n(pt(o.state)+"...")}await $t(2e3)}}(o,t.id,n)}function ht(e){let n,o,r,s,c,i,l;return{c(){n=b("div"),o=b("span"),r=v(e[0]),s=y(),c=b("button"),k(c,"class","close icon svelte-1enxikf"),k(n,"class","error-banner svelte-1enxikf")},m(t,u){g(t,n,u),p(n,o),p(o,r),p(n,s),p(n,c),e[3](n),i||(l=x(c,"click",e[2]),i=!0)},p(t,[e]){1&e&&_(r,t[0])},i:t,o:t,d(t){t&&h(n),e[3](null),i=!1,l()}}}function bt(t,e,n){let o,{text:r=""}=e;return t.$$set=t=>{"text"in t&&n(0,r=t.text)},[r,o,()=>o.remove(),function(t){W[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class vt extends dt{constructor(t){super(),at(this,t,bt,ht,c,{text:0})}}function yt(t){const e=t-1;return e*e*e+1}function wt(t,{delay:n=0,duration:o=400,easing:r=e}={}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:r,css:t=>"opacity: "+t*s}}function xt(t,{delay:e=0,duration:n=400,easing:o=yt,x:r=0,y:s=0,opacity:c=0}={}){const i=getComputedStyle(t),l=+i.opacity,u="none"===i.transform?"":i.transform,a=l*(1-c);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*r}px, ${(1-t)*s}px);\n\t\t\topacity: ${l-a*e}`}}function kt(t){let e,n,o;const r=t[3].default,s=i(r,t,t[2],null);return{c(){e=b("section"),s&&s.c(),k(e,"class","svelte-vaz8tc"),C(e,"center",t[0])},m(t,n){g(t,e,n),s&&s.m(e,null),o=!0},p(n,[c]){t=n,s&&s.p&&(!o||4&c)&&u(s,r,t,t[2],c,null,null),1&c&&C(e,"center",t[0])},i(r){o||(et(s,r),B((()=>{n||(n=rt(e,wt,t[1],!0)),n.run(1)})),o=!0)},o(r){nt(s,r),n||(n=rt(e,wt,t[1],!1)),n.run(0),o=!1},d(t){t&&h(e),s&&s.d(t),t&&n&&n.end()}}}function _t(t,e,n){let{$$slots:o={},$$scope:r}=e,{center:s=!1}=e;return t.$$set=t=>{"center"in t&&n(0,s=t.center),"$$scope"in t&&n(2,r=t.$$scope)},[s,{duration:250},r,o]}class Pt extends dt{constructor(t){super(),at(this,t,_t,kt,c,{center:0})}}function Ct(t){let e,n,o,r=!t[1]&&Et(t);return{c(){e=b("div"),n=y(),r&&r.c(),o=w(),k(e,"class","image icon svelte-nmilqg")},m(t,s){g(t,e,s),g(t,n,s),r&&r.m(t,s),g(t,o,s)},p(t,e){t[1]?r&&(r.d(1),r=null):r?r.p(t,e):(r=Et(t),r.c(),r.m(o.parentNode,o))},d(t){t&&h(e),t&&h(n),r&&r.d(t),t&&h(o)}}}function jt(t){let e,n,o,r,s,c;return{c(){e=b("img"),o=y(),r=b("button"),k(e,"alt","Input"),e.src!==(n=URL.createObjectURL(t[0]))&&k(e,"src",n),k(e,"class","svelte-nmilqg"),k(r,"class","delete icon svelte-nmilqg")},m(n,i){g(n,e,i),g(n,o,i),g(n,r,i),s||(c=x(r,"click",t[6]),s=!0)},p(t,o){1&o&&e.src!==(n=URL.createObjectURL(t[0]))&&k(e,"src",n)},d(t){t&&h(e),t&&h(o),t&&h(r),s=!1,c()}}}function Et(t){let e,n,o,r,s;return{c(){e=b("label"),n=v("Choose or drag and drop an image\n\t\t\t\t"),o=b("input"),k(o,"type","file"),k(o,"accept","image/*"),o.disabled=t[1],k(o,"class","svelte-nmilqg"),k(e,"class","svelte-nmilqg")},m(c,i){g(c,e,i),p(e,n),p(e,o),t[7](o),r||(s=x(o,"change",t[8]),r=!0)},p(t,e){2&e&&(o.disabled=t[1])},d(n){n&&h(e),t[7](null),r=!1,s()}}}function Mt(e){let n,o,s;function c(t,e){return t[0]?jt:Ct}let i=c(e),l=i(e);return{c(){n=b("div"),l.c(),k(n,"class","drop-area svelte-nmilqg"),C(n,"empty",!e[0]),C(n,"dragover",e[3]),C(n,"disabled",e[1])},m(t,r){g(t,n,r),l.m(n,null),o||(s=[x(n,"click",e[9]),x(n,"dragenter",e[10]),x(n,"dragleave",e[11]),x(n,"dragover",Lt),x(n,"drop",e[4])],o=!0)},p(t,[e]){i===(i=c(t))&&l?l.p(t,e):(l.d(1),l=i(t),l&&(l.c(),l.m(n,null))),1&e&&C(n,"empty",!t[0]),8&e&&C(n,"dragover",t[3]),2&e&&C(n,"disabled",t[1])},i:t,o:t,d(t){t&&h(n),l.d(),o=!1,r(s)}}}function Lt(t){t.preventDefault()}function Rt(t,e,n){let o,{file:r}=e,{disabled:s=!1}=e,c=0;function i(t){!s&&t.item(0).type.startsWith("image/")&&n(0,r=t.item(0))}return t.$$set=t=>{"file"in t&&n(0,r=t.file),"disabled"in t&&n(1,s=t.disabled)},[r,s,o,c,function(t){t.preventDefault(),i(t.dataTransfer.files),n(3,c=0)},i,function(t){t.stopPropagation(),n(0,r=void 0)},function(t){W[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},()=>i(o.files),()=>r||o.click(),()=>n(3,++c),()=>n(3,--c)]}class Ot extends dt{constructor(t){super(),at(this,t,Rt,Mt,c,{file:0,disabled:1})}}function St(t){let e,n,o,r,s;const c=t[4].default,l=i(c,t,t[3],null);return{c(){e=b("a"),l&&l.c(),k(e,"class","next-button svelte-18i7n5"),k(e,"href",t[0]),k(e,"download",t[1]),k(e,"target",t[2])},m(n,c){g(n,e,c),l&&l.m(e,null),o=!0,r||(s=x(e,"click",t[5]),r=!0)},p(n,[r]){t=n,l&&l.p&&(!o||8&r)&&u(l,c,t,t[3],r,null,null),(!o||1&r)&&k(e,"href",t[0]),(!o||2&r)&&k(e,"download",t[1]),(!o||4&r)&&k(e,"target",t[2])},i(t){o||(et(l,t),B((()=>{n||(n=rt(e,xt,{x:window.innerWidth,duration:500},!0)),n.run(1)})),o=!0)},o(t){nt(l,t),n||(n=rt(e,xt,{x:window.innerWidth,duration:500},!1)),n.run(0),o=!1},d(t){t&&h(e),l&&l.d(t),t&&n&&n.end(),r=!1,s()}}}function Tt(t,e,n){let{$$slots:o={},$$scope:r}=e,{href:s=null}=e,{download:c=null}=e,{target:i=null}=e;return t.$$set=t=>{"href"in t&&n(0,s=t.href),"download"in t&&n(1,c=t.download),"target"in t&&n(2,i=t.target),"$$scope"in t&&n(3,r=t.$$scope)},[s,c,i,r,o,function(e){q(t,e)}]}class Ut extends dt{constructor(t){super(),at(this,t,Tt,St,c,{href:0,download:1,target:2})}}function qt(t){let e,n;return e=new Ut({props:{$$slots:{default:[Nt]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,n){const o={};32&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Nt(t){let e;return{c(){e=v("Submit Face")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function Wt(t){let e,n,o,r,s,c,i,l,u;function a(e){t[2](e)}let d={};function f(e){t[3](e)}void 0!==t[0][0]&&(d.file=t[0][0]),n=new Ot({props:d}),W.push((()=>st(n,"file",a)));let m={disabled:!t[0][0]};void 0!==t[0][1]&&(m.file=t[0][1]),s=new Ot({props:m}),W.push((()=>st(s,"file",f)));let $=t[0][0]&&qt(t);return{c(){e=b("div"),ct(n.$$.fragment),r=y(),ct(s.$$.fragment),i=y(),$&&$.c(),l=w(),k(e,"class","svelte-s44igd")},m(t,o){g(t,e,o),it(n,e,null),p(e,r),it(s,e,null),g(t,i,o),$&&$.m(t,o),g(t,l,o),u=!0},p(t,e){const r={};!o&&1&e&&(o=!0,r.file=t[0][0],J((()=>o=!1))),n.$set(r);const i={};1&e&&(i.disabled=!t[0][0]),!c&&1&e&&(c=!0,i.file=t[0][1],J((()=>c=!1))),s.$set(i),t[0][0]?$?($.p(t,e),1&e&&et($,1)):($=qt(t),$.c(),et($,1),$.m(l.parentNode,l)):$&&(Z(),nt($,1,1,(()=>{$=null})),tt())},i(t){u||(et(n.$$.fragment,t),et(s.$$.fragment,t),et($),u=!0)},o(t){nt(n.$$.fragment,t),nt(s.$$.fragment,t),nt($),u=!1},d(t){t&&h(e),lt(n),lt(s),t&&h(i),$&&$.d(t),t&&h(l)}}}function At(t){let e,n;return e=new Pt({props:{center:!0,$$slots:{default:[Wt]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,[n]){const o={};33&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Dt(t,e,n){let o=[];const r=U();return[o,r,function(e){t.$$.not_equal(o[0],e)&&(o[0]=e,n(0,o))},function(e){t.$$.not_equal(o[1],e)&&(o[1]=e,n(0,o))},()=>r("submit",o)]}class zt extends dt{constructor(t){super(),at(this,t,Dt,At,c,{})}}function Ft(t){let e;return{c(){e=b("span"),P(e,"background-image","url('../img/"+t[0]+".svg')"),k(e,"class","svelte-166giej")},m(t,n){g(t,e,n)},p(t,n){1&n&&P(e,"background-image","url('../img/"+t[0]+".svg')")},d(t){t&&h(e)}}}function Bt(t){let e,n,o,r,s,c,l=t[0]&&Ft(t);const a=t[2].default,d=i(a,t,t[1],null);return{c(){e=b("button"),l&&l.c(),n=y(),d&&d.c(),k(e,"class","back-button svelte-166giej")},m(o,i){g(o,e,i),l&&l.m(e,null),p(e,n),d&&d.m(e,null),r=!0,s||(c=x(e,"click",t[3]),s=!0)},p(t,[o]){t[0]?l?l.p(t,o):(l=Ft(t),l.c(),l.m(e,n)):l&&(l.d(1),l=null),d&&d.p&&(!r||2&o)&&u(d,a,t,t[1],o,null,null)},i(t){r||(et(d,t),B((()=>{o||(o=rt(e,xt,{x:-300,duration:500},!0)),o.run(1)})),r=!0)},o(t){nt(d,t),o||(o=rt(e,xt,{x:-300,duration:500},!1)),o.run(0),r=!1},d(t){t&&h(e),l&&l.d(),d&&d.d(t),t&&o&&o.end(),s=!1,c()}}}function Jt(t,e,n){let{$$slots:o={},$$scope:r}=e,{icon:s}=e;return t.$$set=t=>{"icon"in t&&n(0,s=t.icon),"$$scope"in t&&n(1,r=t.$$scope)},[s,r,o,function(e){q(t,e)}]}class It extends dt{constructor(t){super(),at(this,t,Jt,Bt,c,{icon:0})}}const Gt=fetch("../gradients.json").then((t=>t.json()));function Ht(t){let e;return{c(){e=b("span"),e.textContent="Combo",k(e,"class","combo svelte-18g0vmo")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function Yt(e){let n,o,s,c,i,l,u,a,d,f,m,$,w,P,j,E,M,L,R=e[1].name+"",O=e[1].artist+"",S=e[1].combo&&Ht();return{c(){n=b("label"),o=b("input"),c=y(),i=b("audio"),u=y(),a=b("button"),d=y(),f=b("div"),m=b("p"),$=v(R),w=y(),P=b("p"),j=v(O),E=y(),S&&S.c(),k(o,"type","radio"),o.value=s=e[1].id,k(o,"name",e[2]),k(o,"class","svelte-18g0vmo"),i.src!==(l="https://songs.wombo.ai/"+e[1].id+".mp3")&&k(i,"src",l),k(i,"preload","none"),k(a,"class","svelte-18g0vmo"),C(a,"playing",e[5]),k(m,"class","name svelte-18g0vmo"),k(P,"class","artist svelte-18g0vmo"),k(f,"class","svelte-18g0vmo"),k(n,"class","meme-radio-button svelte-18g0vmo"),C(n,"selected",e[6])},m(t,r){var s;g(t,n,r),p(n,o),p(n,c),p(n,i),e[7](i),p(n,u),p(n,a),p(n,d),p(n,f),p(f,m),p(m,$),p(f,w),p(f,P),p(P,j),p(n,E),S&&S.m(n,null),e[10](n),M||(L=[x(i,"play",e[8]),x(i,"pause",e[9]),x(n,"click",(s=e[11],function(t){return t.preventDefault(),s.call(this,t)}))],M=!0)},p(t,[e]){2&e&&s!==(s=t[1].id)&&(o.value=s),4&e&&k(o,"name",t[2]),2&e&&i.src!==(l="https://songs.wombo.ai/"+t[1].id+".mp3")&&k(i,"src",l),32&e&&C(a,"playing",t[5]),2&e&&R!==(R=t[1].name+"")&&_($,R),2&e&&O!==(O=t[1].artist+"")&&_(j,O),t[1].combo?S||(S=Ht(),S.c(),S.m(n,null)):S&&(S.d(1),S=null),64&e&&C(n,"selected",t[6])},i:t,o:t,d(t){t&&h(n),e[7](null),S&&S.d(),e[10](null),M=!1,r(L)}}}function Kt(t,e,n){let o,r,{meme:s}=e,{selectedMeme:c}=e,{name:i=""}=e,l=!1,u=!1,a=!1;(async function(t="0deg"){const e=await Gt,n=e[Math.floor(Math.random()*e.length)];let o=`linear-gradient(${t}`;for(let t=0;t<n.colors.length;++t)o+=`, ${n.colors[t]} ${100*t/(n.colors.length-1)}%`;return o+");"})("90deg").then((t=>{r.setAttribute("style",`background: ${t}`)}));return t.$$set=t=>{"meme"in t&&n(1,s=t.meme),"selectedMeme"in t&&n(0,c=t.selectedMeme),"name"in t&&n(2,i=t.name)},t.$$.update=()=>{1&t.$$.dirty&&c&&(a||(a=!0,setTimeout((()=>a=!1),10),n(6,u=s.id===c.id),o&&!o.paused?(o.pause(),n(3,o.currentTime=0,o)):u&&(null==o||o.play())))},[c,s,i,o,r,l,u,function(t){W[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},()=>n(5,l=!0),()=>n(5,l=!1),function(t){W[t?"unshift":"push"]((()=>{r=t,n(4,r)}))},()=>n(0,c=s)]}class Qt extends dt{constructor(t){super(),at(this,t,Kt,Yt,c,{meme:1,selectedMeme:0,name:2})}}function Vt(t,e,n){const o=t.slice();return o[6]=e[n],o}function Xt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Zt(t){let e,n,o=t[5],r=[];for(let e=0;e<o.length;e+=1)r[e]=te(Vt(t,o,e));const s=t=>nt(r[t],1,1,(()=>{r[t]=null}));return{c(){e=b("div");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,o){g(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(1&n){let c;for(o=t[5],c=0;c<o.length;c+=1){const s=Vt(t,o,c);r[c]?(r[c].p(s,n),et(r[c],1)):(r[c]=te(s),r[c].c(),et(r[c],1),r[c].m(e,null))}for(Z(),c=o.length;c<r.length;c+=1)s(c);tt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)et(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)nt(r[t]);n=!1},d(t){t&&h(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function te(t){let e,n,o;function r(e){t[2](e)}let s={name:"meme",meme:t[6]};return void 0!==t[0]&&(s.selectedMeme=t[0]),e=new Qt({props:s}),W.push((()=>st(e,"selectedMeme",r))),{c(){ct(e.$$.fragment)},m(t,n){it(e,t,n),o=!0},p(t,o){const r={};!n&&1&o&&(n=!0,r.selectedMeme=t[0],J((()=>n=!1))),e.$set(r)},i(t){o||(et(e.$$.fragment,t),o=!0)},o(t){nt(e.$$.fragment,t),o=!1},d(t){lt(e,t)}}}function ee(e){let n;return{c(){n=b("p"),n.textContent="Loading memes...",k(n,"class","progress svelte-1tti5hd")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function ne(t){let e,n;return e=new Ut({props:{$$slots:{default:[oe]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,n){const o={};512&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function oe(t){let e;return{c(){e=v("Choose Meme")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function re(t){let e;return{c(){e=v("Choose new image")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function se(t){let e,n,o,r,s={ctx:t,current:null,token:null,hasCatch:!1,pending:ee,then:Zt,catch:Xt,value:5,blocks:[,,,]};!function(t,e){const n=e.token={};function o(t,o,r,s){if(e.token!==n)return;e.resolved=s;let c=e.ctx;void 0!==r&&(c=c.slice(),c[r]=s);const i=t&&(e.current=t)(c);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(Z(),nt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),tt())})):e.block.d(1),i.c(),et(i,1),i.m(e.mount(),e.anchor),l=!0),e.block=i,e.blocks&&(e.blocks[o]=i),l&&H()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=T();if(t.then((t=>{S(n),o(e.then,1,e.value,t),S(null)}),(t=>{if(S(n),o(e.catch,2,e.error,t),S(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var r}(ie,s);let c=t[0]&&ne(t);return o=new It({props:{icon:"undo",$$slots:{default:[re]},$$scope:{ctx:t}}}),o.$on("click",t[4]),{c(){s.block.c(),e=y(),c&&c.c(),n=y(),ct(o.$$.fragment)},m(t,i){s.block.m(t,s.anchor=i),s.mount=()=>e.parentNode,s.anchor=e,g(t,e,i),c&&c.m(t,i),g(t,n,i),it(o,t,i),r=!0},p(e,r){(function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)})(s,t=e,r),t[0]?c?(c.p(t,r),1&r&&et(c,1)):(c=ne(t),c.c(),et(c,1),c.m(n.parentNode,n)):c&&(Z(),nt(c,1,1,(()=>{c=null})),tt());const i={};512&r&&(i.$$scope={dirty:r,ctx:t}),o.$set(i)},i(t){r||(et(s.block),et(c),et(o.$$.fragment,t),r=!0)},o(t){for(let t=0;t<3;t+=1){nt(s.blocks[t])}nt(c),nt(o.$$.fragment,t),r=!1},d(t){s.block.d(t),s.token=null,s=null,t&&h(e),c&&c.d(t),t&&h(n),lt(o,t)}}}function ce(t){let e,n;return e=new Pt({props:{$$slots:{default:[se]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,[n]){const o={};513&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}const ie=fetch("../memes.json").then((t=>t.json()));function le(t,e,n){let o;const r=U();return[o,r,function(t){o=t,n(0,o)},()=>r("submit",o),()=>r("back")]}class ue extends dt{constructor(t){super(),at(this,t,le,ce,c,{})}}function ae(e){let n,o;return{c(){n=b("div"),o=b("div"),k(o,"class","completeness svelte-1ld3f8u"),P(o,"width",e[0]+"%"),k(n,"class","progress-bar svelte-1ld3f8u")},m(t,e){g(t,n,e),p(n,o)},p(t,[e]){1&e&&P(o,"width",t[0]+"%")},i:t,o:t,d(t){t&&h(n)}}}function de(t,e,n){let{progressPercent:o=0}=e;return t.$$set=t=>{"progressPercent"in t&&n(0,o=t.progressPercent)},[o]}class fe extends dt{constructor(t){super(),at(this,t,de,ae,c,{progressPercent:0})}}function me(t){let e;return{c(){e=v("Cancel Wombo")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function $e(t){let e,n,o,r,s,c,i,l,u,a;function d(e){t[3](e)}let f={};return void 0!==t[0]&&(f.progressPercent=t[0]),o=new fe({props:f}),W.push((()=>st(o,"progressPercent",d))),u=new It({props:{icon:"x",$$slots:{default:[me]},$$scope:{ctx:t}}}),u.$on("click",t[4]),{c(){e=b("p"),e.innerHTML="Your Wombo is<br/>being created!",n=y(),ct(o.$$.fragment),s=y(),c=b("p"),i=v(t[1]),l=y(),ct(u.$$.fragment),k(e,"class","progress svelte-1tti5hd")},m(t,r){g(t,e,r),g(t,n,r),it(o,t,r),g(t,s,r),g(t,c,r),p(c,i),g(t,l,r),it(u,t,r),a=!0},p(t,e){const n={};!r&&1&e&&(r=!0,n.progressPercent=t[0],J((()=>r=!1))),o.$set(n),(!a||2&e)&&_(i,t[1]);const s={};32&e&&(s.$$scope={dirty:e,ctx:t}),u.$set(s)},i(t){a||(et(o.$$.fragment,t),et(u.$$.fragment,t),a=!0)},o(t){nt(o.$$.fragment,t),nt(u.$$.fragment,t),a=!1},d(t){t&&h(e),t&&h(n),lt(o,t),t&&h(s),t&&h(c),t&&h(l),lt(u,t)}}}function pe(t){let e,n;return e=new Pt({props:{center:!0,$$slots:{default:[$e]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,[n]){const o={};35&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function ge(t,e,n){let{progressMessage:o=""}=e,{progressPercent:r=0}=e;const s=U();return t.$$set=t=>{"progressMessage"in t&&n(1,o=t.progressMessage),"progressPercent"in t&&n(0,r=t.progressPercent)},[r,o,s,function(t){r=t,n(0,r)},()=>s("back")]}class he extends dt{constructor(t){super(),at(this,t,ge,pe,c,{progressMessage:1,progressPercent:0})}}function be(t){let e,n,o=t[2]?.message+"";return{c(){e=b("span"),n=v(o)},m(t,o){g(t,e,o),p(e,n)},p(t,e){4&e&&o!==(o=t[2]?.message+"")&&_(n,o)},d(t){t&&h(e)}}}function ve(t){let e,n;return{c(){e=b("video"),e.src!==(n=t[1])&&k(e,"src",n),e.controls=!0,e.autoplay=!0,e.loop=!0,k(e,"class","svelte-a4rcgb"),C(e,"combo",t[0].combo)},m(t,n){g(t,e,n)},p(t,o){2&o&&e.src!==(n=t[1])&&k(e,"src",n),1&o&&C(e,"combo",t[0].combo)},d(t){t&&h(e)}}}function ye(t){let e;return{c(){e=v("Save")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function we(t){let e;return{c(){e=v("Back to Memes")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function xe(t){let e,n,o,r,s,c,i,l,u,a,d=t[0].artist+"",f=t[0].name+"";function m(t,e){return t[1]?ve:be}let $=m(t),w=$(t);return i=new Ut({props:{href:t[1],target:"_blank",$$slots:{default:[ye]},$$scope:{ctx:t}}}),u=new It({props:{icon:"home",$$slots:{default:[we]},$$scope:{ctx:t}}}),u.$on("click",t[4]),{c(){w.c(),e=y(),n=b("p"),o=v(d),r=v(" - "),s=v(f),c=y(),ct(i.$$.fragment),l=y(),ct(u.$$.fragment),k(n,"class","song-name svelte-a4rcgb")},m(t,d){w.m(t,d),g(t,e,d),g(t,n,d),p(n,o),p(n,r),p(n,s),g(t,c,d),it(i,t,d),g(t,l,d),it(u,t,d),a=!0},p(t,n){$===($=m(t))&&w?w.p(t,n):(w.d(1),w=$(t),w&&(w.c(),w.m(e.parentNode,e))),(!a||1&n)&&d!==(d=t[0].artist+"")&&_(o,d),(!a||1&n)&&f!==(f=t[0].name+"")&&_(s,f);const r={};2&n&&(r.href=t[1]),32&n&&(r.$$scope={dirty:n,ctx:t}),i.$set(r);const c={};32&n&&(c.$$scope={dirty:n,ctx:t}),u.$set(c)},i(t){a||(et(i.$$.fragment,t),et(u.$$.fragment,t),a=!0)},o(t){nt(i.$$.fragment,t),nt(u.$$.fragment,t),a=!1},d(t){w.d(t),t&&h(e),t&&h(n),t&&h(c),lt(i,t),t&&h(l),lt(u,t)}}}function ke(t){let e,n;return e=new Pt({props:{center:!0,$$slots:{default:[xe]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,[n]){const o={};39&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function _e(t,e,n){let{meme:o}=e,{videoURL:r=""}=e,{error:s}=e;const c=U();return t.$$set=t=>{"meme"in t&&n(0,o=t.meme),"videoURL"in t&&n(1,r=t.videoURL),"error"in t&&n(2,s=t.error)},[o,r,s,c,()=>c("back")]}class Pe extends dt{constructor(t){super(),at(this,t,_e,ke,c,{meme:0,videoURL:1,error:2})}}function Ce(t){let e,n;return e=new Pe({props:{meme:t[3],videoURL:t[4],error:t[5]}}),e.$on("back",t[16]),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,n){const o={};8&n&&(o.meme=t[3]),16&n&&(o.videoURL=t[4]),32&n&&(o.error=t[5]),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function je(t){let e,n;return e=new he({props:{progressMessage:t[6],progressPercent:t[8]}}),e.$on("back",t[15]),{c(){ct(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,n){const o={};64&n&&(o.progressMessage=t[6]),256&n&&(o.progressPercent=t[8]),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Ee(e){let n,o;return n=new ue({}),n.$on("back",e[13]),n.$on("submit",e[14]),{c(){ct(n.$$.fragment)},m(t,e){it(n,t,e),o=!0},p:t,i(t){o||(et(n.$$.fragment,t),o=!0)},o(t){nt(n.$$.fragment,t),o=!1},d(t){lt(n,t)}}}function Me(e){let n,o;return n=new zt({}),n.$on("submit",e[12]),{c(){ct(n.$$.fragment)},m(t,e){it(n,t,e),o=!0},p:t,i(t){o||(et(n.$$.fragment,t),o=!0)},o(t){nt(n.$$.fragment,t),o=!1},d(t){lt(n,t)}}}function Le(t){let e,n,o,r,s,c;const i=[Me,Ee,je,Ce],l=[];function u(t,e){return"upload"==t[2]?0:"select-meme"==t[2]?1:"generating"==t[2]?2:"result"==t[2]?3:-1}return~(r=u(t))&&(s=l[r]=i[r](t)),{c(){e=b("main"),n=b("span"),n.textContent="Wombon't",o=y(),s&&s.c(),k(n,"class","logo header svelte-1iefh40")},m(s,i){g(s,e,i),p(e,n),p(e,o),~r&&l[r].m(e,null),t[17](e),c=!0},p(t,[n]){let o=r;r=u(t),r===o?~r&&l[r].p(t,n):(s&&(Z(),nt(l[o],1,1,(()=>{l[o]=null})),tt()),~r?(s=l[r],s?s.p(t,n):(s=l[r]=i[r](t),s.c()),et(s,1),s.m(e,null)):s=null)},i(t){c||(et(s),c=!0)},o(t){nt(s),c=!1},d(n){n&&h(e),~r&&l[r].d(),t[17](null)}}}const Re="Warming up...";function Oe(t,e,n){let o;var r,s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,s){function c(t){try{l(o.next(t))}catch(t){s(t)}}function i(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}l((o=o.apply(t,e||[])).next())}))};let c,i;r=()=>{window.addEventListener("error",(t=>{"ResizeObserver loop limit exceeded"!==a.message&&(console.error(t.error),new vt({target:c,props:{text:t.message}}))}))},T().$$.on_mount.push(r);let l,u,a,d="upload",f=Re,m=0,$=8,p=!1;function g(){return s(this,void 0,void 0,(function*(){n(7,p=!1),n(11,$=8);const t=gt(l,i,(t=>{p||("Converting images..."===t&&n(11,$=9),"Pending..."!==t&&n(10,++m),n(6,f=t))}));n(10,++m);try{n(4,u=yield t)}catch(t){console.error(t),n(5,a=t)}return p||n(10,m=$),n(6,f=Re),n(10,m=0),!p}))}return t.$$.update=()=>{3072&t.$$.dirty&&n(8,o=100*m/$)},[c,i,d,l,u,a,f,p,o,g,m,$,t=>{n(1,i=t.detail),n(2,d="select-meme")},()=>n(2,d="upload"),async t=>{n(3,l=t.detail),n(2,d="generating"),await g()&&n(2,d="result")},()=>{n(2,d="select-meme"),n(7,p=!0)},()=>n(2,d="select-meme"),function(t){W[t?"unshift":"push"]((()=>{c=t,n(0,c)}))}]}return new class extends dt{constructor(t){super(),at(this,t,Oe,Le,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
